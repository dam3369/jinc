<!DOCTYPE html>
<html>
<head lang="en">
    <title>Jiink - GPS Human Finder</title>
    <link async rel="stylesheet" type="text/css" href="/css/main.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <link rel="manifest" href="./manifest.json">
</head>
<body>
    <div id="infoDiv">
    </div>
    <div id="wallpaper" class="wallpaper">
        <div class="container home">
            <header id="header" class="header center">
                <div id="logo"></div>
            </header>
            <div id="home" class="home-view">
            <center>
                <div id="prepareLink">
                <p>Send first the tracker to your target</p>
                <span id="link"></span>
                <button class="btn">Copy it!</button>
                </div>
                <div id="prepareConnect">
                <!--
                <a href="#" id="smslink">
                    <div class="selectTarget"></div>
                </a>
                -->
                <p>Message sent?</p>
                <div id="connect"></div>
                </div>
                <div id="restore">
                    <span class="restore">Restore current session</span>
                </div>
            </div>
            <div id="session" class="session-view"></div>
            <div id="arrow"  class="circle">
            </div>
            <div id="distance">
                <span id="number"></span><br />
                <span id="unit"></span>
            </div>
            </center>
        </div>
        <table id="debug">
            <tr>
                <td>
                    <div id="connected"></div>
                </td>
                <td style="text-align: right;">
                    <div id="hash"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div><b>Me</b></div>
                </td>
                <td style="text-align: right;">
                    <div><b>Target</b></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id="lat"></div>
                </td>
                <td style="text-align: right;">
                    <div id="trg-lat"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id="lng"></div>
                </td>
                <td style="text-align: right;">
                    <div id="trg-lng"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <div id="watch-count">0</div>
                </td>
                <td style="text-align: right;">
                    <div id="request-count">0</div>
                </td>
            </tr>
        </table>
    </div>

    <script async type="text/javascript" src="/dist/js/app.js"></script>
    <script type="text/javascript" src="src/clipboard.min.js"></script>

    <script type="text/javascript">
      document.getElementById('arrow').style = 'display: none;';
      // if ('serviceWorker' in navigator) {
      //   console.log('regestring service worker');
      //   navigator.serviceWorker
      //           .register('https://jiink.io/sw.js', {scope: './'})
      //           .then(function(reg) {
      //             console.log('Service Worker Registered', reg);
      //           })
      //           .catch(function(err) {
      //               console.warn('Error whilst registering service worker', err);
      //           });
      // }
      var alerted = localStorage.getItem('alerted') || '';
      if (alerted != 'yes') {
         alert("üç∏üé© \nYou must always allow your GPS to make Jiink.io running well\n\n(we wont tell you anymore)");
         localStorage.setItem('alerted','yes');
      }
      document.addEventListener('DOMContentLoaded', function () {
        var clipboard = new Clipboard('.btn', {
          target: function() {
            document.getElementById("prepareLink").style.opacity = "0";
            document.getElementById("prepareConnect").style.marginTop = "-5%";
            document.getElementById("connect").style.opacity = "1";
            document.getElementById("restore").style.opacity = "0";
            return document.querySelector('#link');
          }
        });
      }, false);

    </script>
</body>
</html>
